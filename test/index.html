<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scam and Adversarial Demonstrations</title>
    
    <!-- Base Styles -->
    <link rel="stylesheet" href="./popups/popup.css">
    <link rel="stylesheet" href="./notifications/notification.css">
    <link rel="stylesheet" href="./banners/banner.css">
    <link rel="stylesheet" href="./invisible/invisible.css">
    <link rel="stylesheet" href="./adslot/adslot.css">
    <link rel="stylesheet" href="./forms/form.css">

    <!-- Theme Styles -->
    <link rel="stylesheet" href="./css_configs/normal_theme.css" id="theme-stylesheet">
    
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            width: 100vw;
            max-width: 100%;
            overflow-x: hidden;
        }
        #app-container {
            width: 100%;
            max-width: 100%;
            margin: 0;
            background-color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
            box-sizing: border-box;
        }
        .container-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #3498db;
            width: 100%;
        }
        #theme-selector {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #ecf0f1;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        #theme-selector select {
            padding: 5px;
            border-radius: 3px;
            border: 1px solid #bdc3c7;
        }
        #notifications-container, #popups-container, #banners-container, #invisible-container, #adslot-container, #forms-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            width: 100%;
        }
        .section {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .section:hover {
            transform: translateY(-5px);
        }
        .section h2 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2rem;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        button {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div id="app-container">
        <div class="container-header">
            <h1>Scam and Adversarial Demonstrations</h1>
        </div>

        <div id="theme-selector">
            <select id="theme-change">
                <option value="./css_configs/normal_theme.css">Normal Theme</option>
                <option value="./css_configs/red_theme.css">Red Theme</option>
                <option value="./css_configs/black_theme.css">Black Theme</option>
                <option value="./css_configs/fun_theme.css">Fun Theme</option>
            </select>
        </div>

        <div id="notifications-container" class="section">
            <h2>Notification Demonstrations</h2>
            <button onclick="import('./notifications/phishing/fake_login_notification.js').then(m => m.showFakeLoginNotification())">
                Show Fake Login Notification
            </button>
        </div>

        <div id="popups-container" class="section">
            <h2>Popup Demonstrations</h2>
            <button onclick="import('./popups/phishing_popup.js').then(m => m.showFakeLoginPopup())">
                Show Fake Login Popup
            </button>
        </div>

        <div id="banners-container" class="section">
            <h2>Banner Demonstrations</h2>
            <button onclick="import('./banners/agent_prompt_banner.js').then(m => m.createAgentPromptBanner())">
                Show Agent Prompt Banner
            </button>
        </div>

        <div id="invisible-container" class="section">
            <h2>Invisible Content Demonstrations</h2>
            <button onclick="import('./invisible/hidden_text.js').then(m => m.addHiddenText())">
                Show Hidden Text
            </button>
            <button onclick="import('./invisible/hidden_links.js').then(m => m.addHiddenLinks())">
                Show Hidden Links
            </button>
            <button onclick="alert('Invisible content functionality tested successfully!')">
                Test Invisible Content
            </button>
        </div>

        <div id="adslot-container" class="section">
            <h2>Adslot Demonstrations</h2>
        </div>

        <div id="forms-container" class="section">
            <h2>Form Demonstrations</h2>
        </div>
    </div>

    <script type="module">
        import { createNotification } from './notifications/notification_base.js';
        import { createPopup } from './popups/popup_base.js';
        import { createBanner } from './banners/banner_base.js';
        import { createAdslot } from './adslot/adslot_base.js';
        import scamEngine from '../sites/scam_engine.js';

        // Load modules
        const adslotFiles = ['adslot_base.js'];
        const formFiles = ['form_base.js'];

        function loadModules(type, files) {
            files.forEach(file => {
                import(`./${type}/${file}`)
                    .then(module => {
                        console.log(`Loaded ${type} module: ${file}`);
                    })
                    .catch(error => {
                        console.error(`Failed to load ${type} module: ${file}`, error);
                    });
            });
        }

        loadModules('adslot', adslotFiles);
        loadModules('forms', formFiles);

        // Scan for scams when site loads
        scamEngine.manualScanAndLog();

        const themeMap = {
            './css_configs/normal_theme.css': 'normal',
            './css_configs/red_theme.css': 'red',
            './css_configs/black_theme.css': 'black',
            './css_configs/fun_theme.css': 'fun'
        };

        // Set theme attribute on body
        document.body.setAttribute('data-theme', 'normal');
            
        // Update stylesheet
        const stylesheet = document.getElementById('theme-stylesheet');
        stylesheet.href = './css_configs/normal_theme.css';

        createBanner({ type: 'agent-prompt' });
    </script>
</body>
</html>
